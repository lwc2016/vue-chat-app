(function(t){function e(e){for(var s,i,c=e[0],o=e[1],u=e[2],f=0,d=[];f<c.length;f++)i=c[f],Object.prototype.hasOwnProperty.call(a,i)&&a[i]&&d.push(a[i][0]),a[i]=0;for(s in o)Object.prototype.hasOwnProperty.call(o,s)&&(t[s]=o[s]);l&&l(e);while(d.length)d.shift()();return r.push.apply(r,u||[]),n()}function n(){for(var t,e=0;e<r.length;e++){for(var n=r[e],s=!0,c=1;c<n.length;c++){var o=n[c];0!==a[o]&&(s=!1)}s&&(r.splice(e--,1),t=i(i.s=n[0]))}return t}var s={},a={app:0},r=[];function i(e){if(s[e])return s[e].exports;var n=s[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,i),n.l=!0,n.exports}i.m=t,i.c=s,i.d=function(t,e,n){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},i.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var s in t)i.d(n,s,function(e){return t[e]}.bind(null,s));return n},i.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="/";var c=window["webpackJsonp"]=window["webpackJsonp"]||[],o=c.push.bind(c);c.push=e,c=c.slice();for(var u=0;u<c.length;u++)e(c[u]);var l=o;r.push([0,"chunk-vendors"]),n()})({0:function(t,e,n){t.exports=n("56d7")},"0121":function(t,e,n){"use strict";var s=n("0e61"),a=n.n(s);a.a},"01d3":function(t,e,n){},"030e":function(t,e,n){"use strict";var s=n("ab4f"),a=n.n(s);a.a},"0359":function(t,e,n){t.exports=n.p+"img/user-icon.2bf46f49.png"},"0b66":function(t,e,n){},"0ba3":function(t,e,n){t.exports=n.p+"img/message-active-icon.153d00f7.png"},"0d85":function(t,e,n){"use strict";var s=n("bf00"),a=n.n(s);a.a},"0e61":function(t,e,n){},"0fdf":function(t,e,n){"use strict";var s=n("5c58"),a=n.n(s);a.a},"10c8":function(t,e,n){},1195:function(t,e,n){t.exports=n.p+"img/avatar.0d652c6a.png"},"224b":function(t,e,n){},2395:function(t,e,n){},"23a1":function(t,e,n){"use strict";var s=n("e329"),a=n.n(s);a.a},3355:function(t,e,n){"use strict";var s=n("224b"),a=n.n(s);a.a},3635:function(t,e,n){},"3b92":function(t,e,n){},4678:function(t,e,n){var s={"./af":"2bfb","./af.js":"2bfb","./ar":"8e73","./ar-dz":"a356","./ar-dz.js":"a356","./ar-kw":"423e","./ar-kw.js":"423e","./ar-ly":"1cfd","./ar-ly.js":"1cfd","./ar-ma":"0a84","./ar-ma.js":"0a84","./ar-sa":"8230","./ar-sa.js":"8230","./ar-tn":"6d83","./ar-tn.js":"6d83","./ar.js":"8e73","./az":"485c","./az.js":"485c","./be":"1fc1","./be.js":"1fc1","./bg":"84aa","./bg.js":"84aa","./bm":"a7fa","./bm.js":"a7fa","./bn":"9043","./bn.js":"9043","./bo":"d26a","./bo.js":"d26a","./br":"6887","./br.js":"6887","./bs":"2554","./bs.js":"2554","./ca":"d716","./ca.js":"d716","./cs":"3c0d","./cs.js":"3c0d","./cv":"03ec","./cv.js":"03ec","./cy":"9797","./cy.js":"9797","./da":"0f14","./da.js":"0f14","./de":"b469","./de-at":"b3eb","./de-at.js":"b3eb","./de-ch":"bb71","./de-ch.js":"bb71","./de.js":"b469","./dv":"598a","./dv.js":"598a","./el":"8d47","./el.js":"8d47","./en-SG":"cdab","./en-SG.js":"cdab","./en-au":"0e6b","./en-au.js":"0e6b","./en-ca":"3886","./en-ca.js":"3886","./en-gb":"39a6","./en-gb.js":"39a6","./en-ie":"e1d3","./en-ie.js":"e1d3","./en-il":"7333","./en-il.js":"7333","./en-nz":"6f50","./en-nz.js":"6f50","./eo":"65db","./eo.js":"65db","./es":"898b","./es-do":"0a3c","./es-do.js":"0a3c","./es-us":"55c9","./es-us.js":"55c9","./es.js":"898b","./et":"ec18","./et.js":"ec18","./eu":"0ff2","./eu.js":"0ff2","./fa":"8df4","./fa.js":"8df4","./fi":"81e9","./fi.js":"81e9","./fo":"0721","./fo.js":"0721","./fr":"9f26","./fr-ca":"d9f8","./fr-ca.js":"d9f8","./fr-ch":"0e49","./fr-ch.js":"0e49","./fr.js":"9f26","./fy":"7118","./fy.js":"7118","./ga":"5120","./ga.js":"5120","./gd":"f6b4","./gd.js":"f6b4","./gl":"8840","./gl.js":"8840","./gom-latn":"0caa","./gom-latn.js":"0caa","./gu":"e0c5","./gu.js":"e0c5","./he":"c7aa","./he.js":"c7aa","./hi":"dc4d","./hi.js":"dc4d","./hr":"4ba9","./hr.js":"4ba9","./hu":"5b14","./hu.js":"5b14","./hy-am":"d6b6","./hy-am.js":"d6b6","./id":"5038","./id.js":"5038","./is":"0558","./is.js":"0558","./it":"6e98","./it-ch":"6f12","./it-ch.js":"6f12","./it.js":"6e98","./ja":"079e","./ja.js":"079e","./jv":"b540","./jv.js":"b540","./ka":"201b","./ka.js":"201b","./kk":"6d79","./kk.js":"6d79","./km":"e81d","./km.js":"e81d","./kn":"3e92","./kn.js":"3e92","./ko":"22f8","./ko.js":"22f8","./ku":"2421","./ku.js":"2421","./ky":"9609","./ky.js":"9609","./lb":"440c","./lb.js":"440c","./lo":"b29d","./lo.js":"b29d","./lt":"26f9","./lt.js":"26f9","./lv":"b97c","./lv.js":"b97c","./me":"293c","./me.js":"293c","./mi":"688b","./mi.js":"688b","./mk":"6909","./mk.js":"6909","./ml":"02fb","./ml.js":"02fb","./mn":"958b","./mn.js":"958b","./mr":"39bd","./mr.js":"39bd","./ms":"ebe4","./ms-my":"6403","./ms-my.js":"6403","./ms.js":"ebe4","./mt":"1b45","./mt.js":"1b45","./my":"8689","./my.js":"8689","./nb":"6ce3","./nb.js":"6ce3","./ne":"3a39","./ne.js":"3a39","./nl":"facd","./nl-be":"db29","./nl-be.js":"db29","./nl.js":"facd","./nn":"b84c","./nn.js":"b84c","./pa-in":"f3ff","./pa-in.js":"f3ff","./pl":"8d57","./pl.js":"8d57","./pt":"f260","./pt-br":"d2d4","./pt-br.js":"d2d4","./pt.js":"f260","./ro":"972c","./ro.js":"972c","./ru":"957c","./ru.js":"957c","./sd":"6784","./sd.js":"6784","./se":"ffff","./se.js":"ffff","./si":"eda5","./si.js":"eda5","./sk":"7be6","./sk.js":"7be6","./sl":"8155","./sl.js":"8155","./sq":"c8f3","./sq.js":"c8f3","./sr":"cf1e","./sr-cyrl":"13e9","./sr-cyrl.js":"13e9","./sr.js":"cf1e","./ss":"52bd","./ss.js":"52bd","./sv":"5fbd","./sv.js":"5fbd","./sw":"74dc","./sw.js":"74dc","./ta":"3de5","./ta.js":"3de5","./te":"5cbb","./te.js":"5cbb","./tet":"576c","./tet.js":"576c","./tg":"3b1b","./tg.js":"3b1b","./th":"10e8","./th.js":"10e8","./tl-ph":"0f38","./tl-ph.js":"0f38","./tlh":"cf75","./tlh.js":"cf75","./tr":"0e81","./tr.js":"0e81","./tzl":"cf51","./tzl.js":"cf51","./tzm":"c109","./tzm-latn":"b53d","./tzm-latn.js":"b53d","./tzm.js":"c109","./ug-cn":"6117","./ug-cn.js":"6117","./uk":"ada2","./uk.js":"ada2","./ur":"5294","./ur.js":"5294","./uz":"2e8c","./uz-latn":"010e","./uz-latn.js":"010e","./uz.js":"2e8c","./vi":"2921","./vi.js":"2921","./x-pseudo":"fd7e","./x-pseudo.js":"fd7e","./yo":"7f33","./yo.js":"7f33","./zh-cn":"5c3a","./zh-cn.js":"5c3a","./zh-hk":"49ab","./zh-hk.js":"49ab","./zh-tw":"90ea","./zh-tw.js":"90ea"};function a(t){var e=r(t);return n(e)}function r(t){if(!n.o(s,t)){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}return s[t]}a.keys=function(){return Object.keys(s)},a.resolve=r,t.exports=a,a.id="4678"},4723:function(t,e,n){"use strict";var s=n("509e"),a=n.n(s);a.a},"48f0":function(t,e,n){},"4d08":function(t,e,n){"use strict";var s=n("3b92"),a=n.n(s);a.a},"509e":function(t,e,n){},"564e":function(t,e,n){},"56d7":function(t,e,n){"use strict";n.r(e);n("e260"),n("e6cf"),n("cca6"),n("a79d");var s=n("2b0e"),a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"app"}},[n("router-view")],1)},r=[],i=(n("7c55"),n("2877")),c={},o=Object(i["a"])(c,a,r,!1,null,null,null),u=o.exports,l=n("8c4f"),f=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"container"},[n("c-form",{ref:"form",staticClass:"form",attrs:{form:t.form,rules:t.rules}},[n("c-form-item",{attrs:{prop:"name"}},[n("c-input",{attrs:{placeholder:"用户名"},model:{value:t.form.name,callback:function(e){t.$set(t.form,"name",e)},expression:"form.name"}})],1),n("c-form-item",{attrs:{prop:"password"}},[n("c-input",{attrs:{type:"password",placeholder:"密码"},model:{value:t.form.password,callback:function(e){t.$set(t.form,"password",e)},expression:"form.password"}})],1),n("c-form-item",[n("c-button",{on:{click:t.handleSubmit}},[t._v("登录")])],1)],1),n("p",{staticClass:"notice"},[n("router-link",{attrs:{to:"/register"}},[t._v("没有账号？立即注册")])],1)],1)},d=[],m=n("5530"),p={data:function(){return{form:{name:"",password:""},rules:{name:[{required:!0,message:"请填写用户名！"}],password:[{required:!0,message:"请填写密码！"}]}}},methods:{handleSubmit:function(){var t=this;this.$refs.form.validate((function(e){if(e)return t.$message.error(e[0].message);t.$store.dispatch("user/login",Object(m["a"])({},t.form)).then((function(e){t.$message.success("登录成功！"),t.$router.push("/")})).catch((function(e){t.$message.error(e)}))}))}}},v=p,h=(n("70f0"),Object(i["a"])(v,f,d,!1,null,"1dfafe6c",null)),b=h.exports,g=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"container"},[n("c-form",{ref:"form",staticClass:"form",attrs:{form:t.form,rules:t.rules}},[n("c-form-item",[n("c-input",{attrs:{type:"text",placeholder:"用户名"},model:{value:t.form.name,callback:function(e){t.$set(t.form,"name",e)},expression:"form.name"}})],1),n("c-form-item",[n("c-input",{attrs:{type:"text",placeholder:"昵称"},model:{value:t.form.nickName,callback:function(e){t.$set(t.form,"nickName",e)},expression:"form.nickName"}})],1),n("c-form-item",[n("c-input",{attrs:{type:"password",placeholder:"密码"},model:{value:t.form.password,callback:function(e){t.$set(t.form,"password",e)},expression:"form.password"}})],1),n("c-form-item",[n("c-input",{attrs:{type:"password",placeholder:"确认密码"},model:{value:t.form.confirmPassword,callback:function(e){t.$set(t.form,"confirmPassword",e)},expression:"form.confirmPassword"}})],1),n("c-form-item",[n("c-button",{on:{click:t.handleSubmit}},[t._v("注册")])],1)],1),n("p",{staticClass:"notice"},[n("router-link",{attrs:{to:"/login"}},[t._v("已有账号？立即登录")])],1)],1)},j=[],_=(n("ac1f"),n("5319"),n("96cf"),n("1da1")),k=(n("d3b7"),n("bc3a")),y=n.n(k),x=function(t,e){var n=s["a"].extend(t),a=new n({propsData:e});return a.$mount(),document.body.appendChild(a.$el),a.remove=function(){a.$destroy(),document.body.removeChild(a.$el)},a},w=function(){var t,e=this,n=e.$createElement,s=e._self._c||n;return s("transition",{attrs:{name:"down"}},[e.isShow?s("div",{class:(t={message:!0},t[e.type]=!0,t)},[e._v(e._s(e.text))]):e._e()])},$=[],C={props:{type:{type:String,default:"success"},text:{type:String,default:""}},data:function(){return{isShow:!1}},methods:{show:function(){this.isShow=!0,setTimeout(this.hide,3e3)},hide:function(){this.isShow=!1,setTimeout(this.remove,1e3)}}},O=C,I=(n("b761"),Object(i["a"])(O,w,$,!1,null,"dd6232ee",null)),S=I.exports,R=y.a.create({baseURL:"/api"});R.interceptors.request.use((function(t){return t}),(function(t){return Promise.reject(t)})),R.interceptors.response.use((function(t){var e=t.status,n=t.data;return 200!==e?Promise.reject(new Error("错误")):200!==n.status?(x(S,{type:"error",text:n.message}).show(),Promise.reject(n.message)):n.result}),(function(t){return x(S,{type:"error",text:t}).show(),Promise.reject(t)}));var E=R,N=function(){return E.post("/user/info",{})},D=function(t){return E.post("/user/login",t)},z=function(){return E.post("/user/logout",{})},P=function(t){return E.post("/user/register",t)},T=function(t){return E.post("/user/search",t)},L=function(t){return E.post("/user/detail",t)},U=function(t){return E.post("/user/update",t)},q={data:function(){return{form:{name:"",nickName:"",password:"",confirmPassword:""},rules:{name:[{required:!0,message:"请填写用户名！"}],nickName:[{required:!0,message:"请填写昵称！"}],password:[{required:!0,message:"请填写密码！"}],confirmPassword:[{required:!0,message:"请再次确认密码！"}]}}},methods:{handleSubmit:function(){var t=this;this.$refs.form.validate((function(e){return e?t.$message.error(e[0].message):t.form.password!==t.form.confirmPassword?t.$message.error("两次输入的密码不一致！"):void t.register()}))},register:function(){var t=this;return Object(_["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,P(t.form);case 2:t.$message.success("注册成功，立即登录吧！"),t.$router.replace("/login");case 4:case"end":return e.stop()}}),e)})))()}}},J=q,B=(n("6d48"),Object(i["a"])(J,g,j,!1,null,"f6ca4536",null)),F=B.exports,M=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"container"},[n("router-view")],1)},A=[],Y={mounted:function(){this.createWebSocket(),this.$store.dispatch("friend/fetchList")}},W=Y,G=(n("3355"),Object(i["a"])(W,M,A,!1,null,"715c5ae4",null)),H=G.exports,K=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("router-view"),n("c-tabBar")],1)},Q=[],V={},X=Object(i["a"])(V,K,Q,!1,null,null,null),Z=X.exports,tt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[t.invitations.length>0?n("div",[n("c-title",[t._v("系统消息")]),n("c-session",t._l(t.invitations,(function(e){return n("c-list-item",{key:e.id,attrs:{path:"/invitation/"+e.id,imgUrl:e.avatar,count:e.isRead?0:1},scopedSlots:t._u([{key:"primary",fn:function(){return[t._v(t._s(e.nickName))]},proxy:!0},{key:"secondary",fn:function(){return["invitation_received"===e.subType?n("div",[t._v("请求加为好友，"),e.remarks?n("span",[t._v("("+t._s(e.remarks)+")")]):t._e()]):t._e(),"invitation_refused"===e.subType?n("div",[t._v("拒绝加你为好友！")]):t._e()]},proxy:!0},{key:"rightBottom",fn:function(){return[t._v(t._s(t._f("formatDateTime")(e.createdTime)))]},proxy:!0}],null,!0)})})),1)],1):t._e(),t.messages.length>0?n("div",[n("c-title",[t._v("好友消息")]),n("c-session",t._l(t.messages,(function(e){return n("c-list-item",{key:e.id,attrs:{path:t.$store.state.user.info.id==e.fromId?"/chatRoom/"+e.toId:"/chatRoom/"+e.fromId,imgUrl:e.avatar,count:e.notReadCount},scopedSlots:t._u([{key:"primary",fn:function(){return[t._v(t._s(e.nickName))]},proxy:!0},{key:"secondary",fn:function(){return[t._v(t._s(e.content))]},proxy:!0},{key:"rightBottom",fn:function(){return[t._v(t._s(t._f("formatDateTime")(e.createdTime)))]},proxy:!0}],null,!0)})})),1)],1):t._e(),0===t.$store.state.message.list.length?n("c-empty",{attrs:{title:"～ 暂无消息 ～"}}):t._e()],1)},et=[],nt=(n("7db0"),n("c740"),n("4160"),n("159b"),{computed:{messages:function(){var t=this,e=[];return this.$store.state.message.list.forEach((function(n){if("system"===n.type)return null;var s=e.findIndex((function(t){return t.fromId===n.fromId||t.toId===n.fromId}));if(s>=0)e[s].notReadCount+=n.isRead?0:1,e[s]=Object(m["a"])({},e[s],{},n);else{var a=t.$store.state.friend.list.find((function(e){return parseInt(t.$store.state.user.info.id)===parseInt(n.fromId)?parseInt(e.userId)===parseInt(n.toId):parseInt(e.userId)===parseInt(n.fromId)}))||{},r=a.nickName,i=a.avatar;n.notReadCount=n.isRead?0:1,e.push(Object(m["a"])({},n,{nickName:r,avatar:i}))}})),e},invitations:function(){var t=[];return this.$store.state.message.list.forEach((function(e){"system"===e.type&&t.push(e)})),console.log(t),t}}}),st=nt,at=(n("be5f"),Object(i["a"])(st,tt,et,!1,null,"80ab8558",null)),rt=at.exports,it=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("c-session",[n("c-session-item",{attrs:{path:"/user/search"}},[t._v("添加好友")])],1),t.$store.state.friend.list.length>0?n("div",[n("h3",{staticClass:"title"},[t._v("我的朋友")]),n("c-session",t._l(t.$store.state.friend.list,(function(e){return n("c-list-item",{key:e.id,attrs:{path:"/friend/"+e.id,imgUrl:e.avatar},scopedSlots:t._u([{key:"primary",fn:function(){return[t._v(t._s(e.remarkName||e.nickName))]},proxy:!0},{key:"secondary",fn:function(){return[n("span",[t._v("用户名：")]),t._v(t._s(e.name))]},proxy:!0}],null,!0)})})),1)],1):n("c-empty",{attrs:{title:"～ 暂无好友 ～"}})],1)},ct=[],ot=(n("5c35"),{}),ut=Object(i["a"])(ot,it,ct,!1,null,"9d15aba8",null),lt=ut.exports,ft=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("c-profile",{attrs:{data:t.$store.state.user.info}}),n("c-session",{staticClass:"body"},[n("c-session-item",{attrs:{path:"/person/edit"}},[[t._v("修改个人信息")]],2),n("c-session-item",{on:{click:t.handleClear}},[[t._v("清除消息记录")]],2)],1),n("div",{staticClass:"buttons"},[n("c-button",{attrs:{type:"danger"},on:{click:t.handleLogout}},[t._v("退出登录")])],1)],1)},dt=[],mt={methods:{handleLogout:function(){var t=this;this.$modal.confirm({title:"提示信息",body:"确定需要退出登录吗？",onOk:function(){var e=Object(_["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,z();case 2:t.$store.commit("user/clearDetail"),t.$message.success("退出登录成功！"),t.$router.push("/");case 5:case"end":return e.stop()}}),e)})));function n(){return e.apply(this,arguments)}return n}()})},handleClear:function(){var t=this;this.$modal.confirm({title:"提示信息",body:"确定需要清除信息吗？",onOk:function(){t.$store.commit("message/clear"),t.$message.success("信息清除成功！")}})}}},pt=mt,vt=(n("4723"),Object(i["a"])(pt,ft,dt,!1,null,"3f5fe9de",null)),ht=vt.exports,bt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"wrapper"},[n("div",{staticClass:"header"},[n("div",{staticClass:"avatar"},[n("img",{attrs:{src:t.form.avatar}}),n("div",{staticClass:"upload-mask"},[t._v("上传图片")]),n("input",{ref:"file",staticClass:"upload",attrs:{type:"file"},on:{change:t.handleUpload}})])]),n("c-form",{staticClass:"form"},[n("c-form-item",[n("c-input",{attrs:{placeholder:"昵称"},model:{value:t.form.nickName,callback:function(e){t.$set(t.form,"nickName",e)},expression:"form.nickName"}})],1),n("c-form-item",[n("c-textarea",{attrs:{placeholder:"个性签名"},model:{value:t.form.remarks,callback:function(e){t.$set(t.form,"remarks",e)},expression:"form.remarks"}})],1),n("c-form-item",[n("c-button",{attrs:{type:"primary"},on:{click:t.handleSubmit}},[t._v("保存")])],1)],1)],1)},gt=[],jt=function(t){return E.post("/file/upload",t)},_t={data:function(){return{form:{nickName:"",remarks:"",avatar:""}}},mounted:function(){var t=this.$store.state.user.info,e=t.nickName,n=t.avatar,s=t.remarks;this.form.nickName=e,this.form.remarks=s,this.form.avatar=n},methods:{handleSubmit:function(){var t=this;return Object(_["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,U(t.form);case 2:return e.next=4,t.$store.dispatch("user/fetchDetail");case 4:t.$message.success("修改成功！"),t.$router.go(-1);case 6:case"end":return e.stop()}}),e)})))()},handleUpload:function(){var t=this;return Object(_["a"])(regeneratorRuntime.mark((function e(){var n,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=t.$refs.file.files[0],s=new FormData,s.append("file",n),e.next=5,jt(s);case 5:t.form.avatar=e.sent,t.$message.success("图片上传成功");case 7:case"end":return e.stop()}}),e)})))()}},watch:{"$store.state.user.info":{deep:!0,handler:function(t){var e=t.nickName,n=t.avatar,s=t.remarks;this.form.nickName=e,this.form.remarks=s,this.form.avatar=n}}}},kt=_t,yt=(n("e7da"),Object(i["a"])(kt,bt,gt,!1,null,"5937be51",null)),xt=yt.exports,wt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("c-profile",{attrs:{data:t.detail}}),n("c-form",{staticClass:"form"},[n("c-form-item",{staticClass:"form-group"},[n("c-input",{attrs:{placeholder:"填写备注"},model:{value:t.remark,callback:function(e){t.remark=e},expression:"remark"}}),n("c-button",{staticClass:"save-btn",on:{click:t.handleUpdate}},[t._v("保存")])],1)],1),n("div",{staticClass:"buttons"},[n("router-link",{attrs:{to:"/chatRoom/"+t.detail.userId}},[n("c-button",[t._v("发消息")])],1),n("c-button",{staticClass:"button",attrs:{type:"danger"}},[t._v("删除好友")])],1)],1)},$t=[],Ct=function(){return E.post("/friend/list",{})},Ot=function(t){return E.post("/friend/detail",t)},It=function(t){return E.post("/friend/update",t)},St={data:function(){return{detail:{},remark:""}},created:function(){this.fetchDetail()},methods:{fetchDetail:function(){var t=this;return Object(_["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Ot({id:t.$route.params.id});case 2:t.detail=e.sent,t.remark=t.detail.remarkName;case 4:case"end":return e.stop()}}),e)})))()},handleUpdate:function(){var t=this;return Object(_["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,It({id:t.$route.params.id,remarkName:t.remark});case 2:t.$store.dispatch("friend/fetchList"),t.$message.success("修改备注成功！"),t.fetchDetail();case 5:case"end":return e.stop()}}),e)})))()}}},Rt=St,Et=(n("9054"),Object(i["a"])(Rt,wt,$t,!1,null,"44846cd4",null)),Nt=Et.exports,Dt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("div",{staticClass:"header"},[n("c-input",{attrs:{placeholder:"昵称或用户名"},model:{value:t.keyword,callback:function(e){t.keyword=e},expression:"keyword"}}),n("c-button",{staticClass:"search",on:{click:t.handleSearch}},[t._v("搜索")])],1),n("div",{staticClass:"content"},[n("c-title",[t._v("搜索结果（"),n("span",{staticClass:"red"},[t._v(t._s(t.total))]),t._v("条）")]),n("c-session",t._l(t.list,(function(e){return n("c-list-item",{key:e.id,attrs:{path:"/user/"+e.id,imgUrl:e.avatar},scopedSlots:t._u([{key:"primary",fn:function(){return[t._v(t._s(e.nickName))]},proxy:!0},{key:"secondary",fn:function(){return[n("span",[t._v("用户名：")]),t._v(t._s(e.name))]},proxy:!0}],null,!0)})})),1)],1)])},zt=[],Pt={data:function(){return{keyword:"",list:[]}},methods:{handleSearch:function(){var t=this;return Object(_["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,T({keyword:t.keyword});case 2:t.list=e.sent;case 3:case"end":return e.stop()}}),e)})))()}},computed:{total:function(){return this.list.length}}},Tt=Pt,Lt=(n("f754"),Object(i["a"])(Tt,Dt,zt,!1,null,"d55dc914",null)),Ut=Lt.exports,qt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("c-profile",{attrs:{data:t.detail}}),n("c-form",{staticClass:"form"},[n("c-form-item",[n("c-textarea",{attrs:{placeholder:"请填写备注"},model:{value:t.remarks,callback:function(e){t.remarks=e},expression:"remarks"}})],1)],1),n("div",{staticClass:"buttons"},[n("c-button",{staticClass:"button",attrs:{type:"primary"},on:{click:t.handleAdd}},[t._v("添加好友")])],1)],1)},Jt=[],Bt=function(t){return E.post("/invitation/send",t)},Ft=function(t){return E.post("/invitation/detail",t)},Mt=function(t){return E.post("/invitation/agree",t)},At=function(t){return E.post("/invitation/refuse",t)},Yt={data:function(){return{detail:{},remarks:""}},created:function(){this.fetchDetail()},methods:{fetchDetail:function(){var t=this;return Object(_["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,L({id:t.$route.params.id});case 2:t.detail=e.sent;case 3:case"end":return e.stop()}}),e)})))()},handleAdd:function(){var t=this;return Object(_["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Bt({userId:t.detail.id,remarks:t.remarks});case 3:t.$message.success("邀请发送成功！"),e.next=9;break;case 6:e.prev=6,e.t0=e["catch"](0),console.log(e.t0);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})))()}}},Wt=Yt,Gt=(n("0d85"),Object(i["a"])(Wt,qt,Jt,!1,null,"71cbd3b8",null)),Ht=Gt.exports,Kt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("c-profile",{attrs:{data:t.detail}}),n("div",{staticClass:"text"},[t._v(t._s(t.detail.invitationRemarks))]),n("div",{staticClass:"buttons"},[n("c-button",{staticClass:"button",attrs:{type:"danger"},on:{click:t.handleRefuse}},[t._v("拒绝")]),n("c-button",{staticClass:"button",attrs:{type:"primary"},on:{click:t.handleAgree}},[t._v("同意")])],1)],1)},Qt=[],Vt={data:function(){return{detail:{}}},mounted:function(){this.fetchDetail(),this.$store.commit("message/setReadById",this.$route.params.id)},methods:{fetchDetail:function(){var t=this;return Object(_["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Ft({id:t.$route.params.id});case 2:t.detail=e.sent;case 3:case"end":return e.stop()}}),e)})))()},handleAgree:function(){var t=this;return Object(_["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Mt({id:t.$route.params.id});case 2:t.$message.success("好友添加成功！"),t.$ws.send(JSON.stringify({content:"同意添加了，开始聊天吧！",toId:t.detail.fromId,type:"text"})),t.$store.dispatch("friend/fetchList"),t.$router.push("/chatroom/".concat(t.detail.fromId));case 6:case"end":return e.stop()}}),e)})))()},handleRefuse:function(){var t=this;return Object(_["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,At({id:t.$route.params.id});case 2:t.$message.success("拒绝成功！");case 3:case"end":return e.stop()}}),e)})))()}}},Xt=Vt,Zt=(n("4d08"),Object(i["a"])(Xt,Kt,Qt,!1,null,"1bf62f9e",null)),te=Zt.exports,ee=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("message-content"),n("footer-form")],1)},ne=[],se=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"messages"},t._l(t.list,(function(t,e){return n("message",{key:e,attrs:{data:t}})})),1)},ae=[],re=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{class:{"message-item":!0,"message-right":t.isSelf}},[n("div",{staticClass:"avatar-box"},[n("img",{staticClass:"avatar",attrs:{src:t.data.avatar||t.avatarIcon}})]),n("div",{staticClass:"message-content"},[n("div",{class:t.isSelf?"arrow-right":"arrow-left"}),n("span",[t._v(t._s(t.data.content))])])])},ie=[],ce=n("1195"),oe=n.n(ce),ue={props:{data:{type:Object,default:function(){return{}}}},data:function(){return{avatarIcon:oe.a}},computed:{isSelf:function(){return parseInt(this.$store.state.user.info.id)===parseInt(this.data.fromId)}}},le=ue,fe=(n("0fdf"),Object(i["a"])(le,re,ie,!1,null,"50eed057",null)),de=fe.exports,me={components:{message:de},computed:{list:function(){var t=this,e=[];return this.$store.state.message.list.forEach((function(n){if("system"===n.type)return null;if(parseInt(n.fromId)===parseInt(t.$store.state.user.info.id))n.avatar=t.$store.state.user.info.avatar;else{var s=t.$store.state.friend.list.find((function(t){return parseInt(n.fromId)===parseInt(t.userId)}))||{},a=s.avatar;n.avatar=a}e.push(n)})),e}}},pe=me,ve=(n("ba5c"),Object(i["a"])(pe,se,ae,!1,null,"f571e47c",null)),he=ve.exports,be=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"footer"},[n("div",{ref:"content",staticClass:"input-content",attrs:{contenteditable:"true"}}),n("c-button",{staticClass:"button",on:{click:t.handleSubmit}},[t._v("发送")])],1)},ge=[],je=n("9ac5"),_e=n.n(je),ke={data:function(){return{pictureIcon:_e.a}},methods:{handleSubmit:function(){var t=this.$refs.content.textContent,e=this.$route.params.id;t&&(this.$ws.send(JSON.stringify({content:t,toId:e,type:"text"})),this.$refs.content.textContent="")}}},ye=ke,xe=(n("732b"),Object(i["a"])(ye,be,ge,!1,null,"1823e159",null)),we=xe.exports,$e={components:{footerForm:we,messageContent:he},mounted:function(){this.$store.commit("message/setRead",this.$route.params.id)}},Ce=$e,Oe=Object(i["a"])(Ce,ee,ne,!1,null,null,null),Ie=Oe.exports;s["a"].use(l["a"]);var Se=[{path:"/login",component:b,name:"login"},{path:"/register",component:F,name:"register"},{path:"/",component:H,children:[{path:"/",component:Z,children:[{path:"/",component:rt,name:"message-list"},{path:"/friend/list",component:lt,name:"friend-list"},{path:"/person",component:ht,name:"person"}]},{path:"/user/search",component:Ut,name:"user-search"},{path:"/user/:id",component:Ht,name:"user-detail"},{path:"/friend/:id",component:Nt,name:"friend-detail"},{path:"/chatRoom/:id",component:Ie,name:"chat-room"},{path:"/invitation/:id",component:te,name:"invitation-detail"},{path:"/person/edit",component:xt,name:"person-edit"}]}],Re=new l["a"]({mode:"history",base:"/",routes:Se}),Ee=Re,Ne=n("2f62"),De={namespaced:!0,state:{isLogined:!1,isFetched:!1,info:{}},mutations:{setDetail:function(t,e){t.info=e,t.isLogined=!0,t.isFetched=!0},clearDetail:function(t){t.info={},t.isLogined=!1}},actions:{fetchDetail:function(t){return Object(_["a"])(regeneratorRuntime.mark((function e(){var n,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=t.commit,e.next=3,N();case 3:s=e.sent,n("setDetail",s);case 5:case"end":return e.stop()}}),e)})))()},login:function(t,e){return Object(_["a"])(regeneratorRuntime.mark((function n(){var s,a;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return s=t.commit,n.next=3,D(e);case 3:a=n.sent,s("setDetail",a);case 5:case"end":return n.stop()}}),n)})))()}}},ze=(n("13d5"),localStorage.getItem("messages")),Pe=ze?JSON.parse(ze):[],Te={namespaced:!0,state:{list:Pe},mutations:{push:function(t,e){t.list.push(e),localStorage.setItem("messages",JSON.stringify(t.list))},setRead:function(t,e){t.list.forEach((function(t){parseInt(t.fromId)===parseInt(e)&&(t.isRead=!0)})),localStorage.setItem("messages",JSON.stringify(t.list))},setReadById:function(t,e){t.list.forEach((function(t){parseInt(t.id)===parseInt(e)&&(t.isRead=!0)})),localStorage.setItem("messages",JSON.stringify(t.list))},clear:function(t){t.list=[],localStorage.removeItem("messages")}},getters:{total:function(t){var e=t.list.reduce((function(t,e){return t+=e.isRead?0:1,t}),0);return console.log(e),e}}},Le={namespaced:!0,state:{list:[]},mutations:{setList:function(t,e){t.list=e}},actions:{fetchList:function(t,e){return Object(_["a"])(regeneratorRuntime.mark((function e(){var n,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=t.commit,e.next=3,Ct();case 3:s=e.sent,n("setList",s);case 5:case"end":return e.stop()}}),e)})))()}},computed:{total:function(t){return t.list.length}}};s["a"].use(Ne["a"]);var Ue=new Ne["a"].Store({modules:{user:De,message:Te,friend:Le}}),qe=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("form",[t._t("default")],2)},Je=[],Be=n("2a95"),Fe={props:{form:{type:Object,default:function(){}},rules:{type:Object,default:function(){}}},methods:{validate:function(t){var e=new Be["a"](this.rules);e.validate(this.form,t)}}},Me=Fe,Ae=Object(i["a"])(Me,qe,Je,!1,null,null,null),Ye=Ae.exports,We=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"form-item"},[t._t("default")],2)},Ge=[],He={},Ke=He,Qe=(n("c87b"),Object(i["a"])(Ke,We,Ge,!1,null,"3884617f",null)),Ve=Qe.exports,Xe=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("input",t._b({staticClass:"input",domProps:{value:t.value},on:{input:function(e){return t.$emit("input",e.target.value)}}},"input",t.$attrs,!1))},Ze=[],tn={props:["value"]},en=tn,nn=(n("cdc0"),Object(i["a"])(en,Xe,Ze,!1,null,"adfa6b08",null)),sn=nn.exports,an=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("button",{class:{button:!0,"primary-btn":"primary"===t.type,"danger-btn":"danger"===t.type},attrs:{type:"button"},on:{click:function(e){return t.$emit("click")}}},[t._t("default")],2)},rn=[],cn={props:{type:{type:String,default:"primary"}}},on=cn,un=(n("fa37"),Object(i["a"])(on,an,rn,!1,null,"7991c5d0",null)),ln=un.exports,fn=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"tabbar"},t._l(t.navs,(function(e,s){return n("tab",t._b({key:s,attrs:{active:t.$route.path===e.path}},"tab",e,!1))})),1)},dn=[],mn=n("e124"),pn=n.n(mn),vn=n("0ba3"),hn=n.n(vn),bn=n("adf9"),gn=n.n(bn),jn=n("fb60"),_n=n.n(jn),kn=n("0359"),yn=n.n(kn),xn=n("d6f6"),wn=n.n(xn),$n=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("router-link",{staticClass:"tab",attrs:{to:t.path}},[n("div",{staticClass:"tab-icon"},[n("img",{attrs:{src:t.active?t.activeIcon:t.icon}}),t.count?n("div",{staticClass:"count"},[t._v(t._s(t.count))]):t._e()]),n("div",{class:{"tab-text":!0,"tab-text-active":t.active}},[t._v(t._s(t.title))])])},Cn=[],On={props:["path","icon","activeIcon","active","title","count"]},In=On,Sn=(n("63a5"),Object(i["a"])(In,$n,Cn,!1,null,"6ed6c9c2",null)),Rn=Sn.exports,En={components:{tab:Rn},data:function(){return{navs:[{path:"/",icon:pn.a,activeIcon:hn.a,title:"消息",count:0},{path:"/friend/list",icon:gn.a,activeIcon:_n.a,title:"好友"},{path:"/person",icon:yn.a,activeIcon:wn.a,title:"我的"}]}},mounted:function(){this.navs[0].count=this.$store.getters["message/total"]},watch:{"$store.getters":{handler:function(t){this.navs[0].count=t["message/total"]},deep:!0}}},Nn=En,Dn=(n("23a1"),Object(i["a"])(Nn,fn,dn,!1,null,"92e95bd6",null)),zn=Dn.exports,Pn=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"session"},[t._t("default")],2)},Tn=[],Ln=(n("92f6"),{}),Un=Object(i["a"])(Ln,Pn,Tn,!1,null,"bdf910d0",null),qn=Un.exports,Jn=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"item"},[t.path?n("router-link",{staticClass:"session-item",attrs:{to:t.path}},[n("div",[n("div",{staticClass:"title"},[t._t("default")],2)]),n("div",[n("div",{staticClass:"right-text"}),n("img",{staticClass:"arrow",attrs:{src:t.arrowIcon}})])]):n("div",{staticClass:"session-item",on:{click:function(e){return t.$emit("click")}}},[n("div",[n("div",{staticClass:"title"},[t._t("default")],2)]),n("div",[n("div",{staticClass:"right-text"}),n("img",{staticClass:"arrow",attrs:{src:t.arrowIcon}})])])],1)},Bn=[],Fn=n("c5d4"),Mn=n.n(Fn),An={props:{path:{type:String,default:""}},data:function(){return{arrowIcon:Mn.a}}},Yn=An,Wn=(n("5b3b"),Object(i["a"])(Yn,Jn,Bn,!1,null,"69d28036",null)),Gn=Wn.exports,Hn=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"info"},[n("div",{staticClass:"avatar-box"},[n("img",{staticClass:"avatar",attrs:{src:t.data.avatar||t.avatarIcon}})]),n("div",{staticClass:"content"},[n("h3",{staticClass:"nickName"},[t._v(t._s(t.data.remarkName||t.data.nickName))]),n("p",{staticClass:"item"},[n("span",[t._v("账号：")]),n("span",[t._v(t._s(t.data.name))])]),n("p",{staticClass:"item"},[n("span",[t._v("备注：")]),n("span",[t._v(t._s(t.data.remarks||"这人很懒什么都没有留下"))])])])])},Kn=[],Qn={props:{data:{type:Object,default:function(){return{}}}},data:function(){return{avatarIcon:oe.a}}},Vn=Qn,Xn=(n("99b5"),Object(i["a"])(Vn,Hn,Kn,!1,null,"a36815d6",null)),Zn=Xn.exports,ts=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("router-link",{staticClass:"friend",attrs:{to:"/friend/"+t.data.userId}},[n("div",{staticClass:"logo"},[n("img",{attrs:{src:t.data.avatar}})]),n("div",{staticClass:"info"},[n("h3",{staticClass:"name"},[t._v(t._s(t.data.nickName))]),n("p",{staticClass:"username"},[t._v(t._s(t.data.name))])])])},es=[],ns={props:{data:{type:Object,default:function(){return{}}}}},ss=ns,as=(n("b5cf"),Object(i["a"])(ss,ts,es,!1,null,"bd367ba6",null)),rs=as.exports,is=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("h3",{staticClass:"title"},[t._t("default")],2)},cs=[],os={},us=os,ls=(n("9d3e"),Object(i["a"])(us,is,cs,!1,null,"fdacf5d4",null)),fs=ls.exports,ds=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"box"},[n("transition",{attrs:{name:"fade"}},[t.isShow?n("div",{staticClass:"mask"}):t._e()]),n("transition",{attrs:{name:"fade"}},[t.isShow?n("div",{staticClass:"modal"},[n("div",{staticClass:"modal-title"},[t._v(t._s(t.title))]),n("div",{staticClass:"modal-body"},[t._v(t._s(t.body))]),n("div",{staticClass:"modal-footer"},[n("div",{staticClass:"btn btn-left",on:{click:t.hide}},[t._v("关闭")]),n("div",{staticClass:"btn btn-right",on:{click:t.handleOk}},[t._v("确定")])])]):t._e()])],1)},ms=[],ps={props:{title:{type:String,default:""},body:{type:String,default:""},onOk:{type:Function,default:function(){}}},data:function(){return{isShow:!1}},methods:{show:function(){this.isShow=!0},hide:function(){this.isShow=!1,setTimeout(this.remove,1e3)},handleOk:function(){this.hide(),this.onOk&&this.onOk()}}},vs=ps,hs=(n("0121"),Object(i["a"])(vs,ds,ms,!1,null,"36fe75b2",null)),bs=hs.exports,gs=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("textarea",t._b({staticClass:"textarea",domProps:{value:t.value},on:{input:function(e){return t.$emit("input",e.target.value)}}},"textarea",t.$attrs,!1))},js=[],_s={props:["value"]},ks=_s,ys=(n("bea5"),Object(i["a"])(ks,gs,js,!1,null,"666e72d0",null)),xs=ys.exports,ws=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"list-item"},[n("router-link",{staticClass:"message",attrs:{to:t.path}},[n("div",{staticClass:"left"},[n("div",{staticClass:"logo"},[n("img",{attrs:{src:t.imgUrl||t.defaultIcon}})]),t.count?n("div",{staticClass:"count"},[t._v(t._s(t.count))]):t._e()]),n("div",{staticClass:"info"},[n("div",{staticClass:"info-item"},[n("h3",{staticClass:"name"},[t._t("primary")],2),t._t("rightTop")],2),n("div",{staticClass:"info-item"},[n("p",{staticClass:"content"},[t._t("secondary")],2),n("p",{staticClass:"content"},[t._t("rightBottom")],2)])])])],1)},$s=[],Cs={props:["path","imgUrl","count"],data:function(){return{defaultIcon:oe.a}}},Os=Cs,Is=(n("030e"),Object(i["a"])(Os,ws,$s,!1,null,"78b9ce78",null)),Ss=Is.exports,Rs=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"empty"},[n("img",{staticClass:"empty-icon",attrs:{src:t.emptyIcon}}),n("p",{staticClass:"notice"},[t._v(t._s(t.title))])])},Es=[],Ns=n("74fb"),Ds=n.n(Ns),zs={props:["title"],data:function(){return{emptyIcon:Ds.a}}},Ps=zs,Ts=(n("9f58"),Object(i["a"])(Ps,Rs,Es,!1,null,"05df5d58",null)),Ls=Ts.exports,Us=function(t){t.component("c-form",Ye),t.component("c-form-item",Ve),t.component("c-input",sn),t.component("c-button",ln),t.component("c-tabBar",zn),t.component("c-session",qn),t.component("c-session-item",Gn),t.component("c-profile",Zn),t.component("c-friend",rs),t.component("c-title",fs),t.component("c-textarea",xs),t.component("c-list-item",Ss),t.component("c-empty",Ls),t.prototype.$message={success:function(t){return x(S,{type:"success",text:t}).show()},error:function(t){return x(S,{type:"error",text:t}).show()}},t.prototype.$modal={confirm:function(t){return x(bs,t).show()}}},qs={install:Us},Js=(n("4de4"),n("c1df")),Bs=n.n(Js),Fs=function(t){return Bs()(t).format("YYYY-MM-DD HH:mm")},Ms=function(t){t.filter("formatDateTime",Fs)},As={install:Ms},Ys=(n("caad"),["/login","/register"]),Ws=function(t,e){t.beforeEach(function(){var t=Object(_["a"])(regeneratorRuntime.mark((function t(n,s,a){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(a(),!Ys.includes(n.path)){t.next=5;break}a(),t.next=25;break;case 5:if(!e.state.user.isLogined){t.next=10;break}console.log("-----已经登录了------"),a(),t.next=25;break;case 10:if(!e.state.user.isFetched){t.next=15;break}console.log("-----需要重新登录-------"),a("/login"),t.next=25;break;case 15:return console.log("-----获取用户信息-----"),t.prev=16,t.next=19,e.dispatch("user/fetchDetail");case 19:a(),t.next=25;break;case 22:t.prev=22,t.t0=t["catch"](16),a("/login");case 25:case"end":return t.stop()}}),t,null,[[16,22]])})));return function(e,n,s){return t.apply(this,arguments)}}())};n("b0c0");function Gs(t){t.mixin({methods:{createWebSocket:function(){var e=this;if(!t.prototype.$ws){var n="ws://chatroom.supersummer.top:3030",s=new WebSocket(n);s.onopen=function(){},s.onmessage=function(t){var n=JSON.parse(t.data);n.isRead="chat-room"===e.$route.name,e.$store.commit("message/push",n)},s.onclose=function(){},t.prototype.$ws=s}}}})}var Hs={install:Gs};s["a"].config.productionTip=!1,s["a"].use(qs),s["a"].use(Hs),s["a"].use(As),Ws(Ee,Ue),new s["a"]({router:Ee,store:Ue,render:function(t){return t(u)}}).$mount("#app")},5908:function(t,e,n){},"5b3b":function(t,e,n){"use strict";var s=n("6c27"),a=n.n(s);a.a},"5c35":function(t,e,n){"use strict";var s=n("61ae"),a=n.n(s);a.a},"5c51":function(t,e,n){},"5c58":function(t,e,n){},"61ae":function(t,e,n){},"63a5":function(t,e,n){"use strict";var s=n("10c8"),a=n.n(s);a.a},6459:function(t,e,n){},"64d7":function(t,e,n){},"6c27":function(t,e,n){},"6d48":function(t,e,n){"use strict";var s=n("5c51"),a=n.n(s);a.a},"70f0":function(t,e,n){"use strict";var s=n("48f0"),a=n.n(s);a.a},"732b":function(t,e,n){"use strict";var s=n("afe0"),a=n.n(s);a.a},7371:function(t,e,n){},"74fb":function(t,e,n){t.exports=n.p+"img/empty-box.28fbd3db.png"},"78b9":function(t,e,n){},"7a03":function(t,e,n){},"7c55":function(t,e,n){"use strict";var s=n("2395"),a=n.n(s);a.a},9054:function(t,e,n){"use strict";var s=n("564e"),a=n.n(s);a.a},"92f6":function(t,e,n){"use strict";var s=n("b93e"),a=n.n(s);a.a},"99b5":function(t,e,n){"use strict";var s=n("0b66"),a=n.n(s);a.a},"9ac5":function(t,e,n){t.exports=n.p+"img/picture.b34fefdc.png"},"9d3e":function(t,e,n){"use strict";var s=n("01d3"),a=n.n(s);a.a},"9d7c":function(t,e,n){},"9e45":function(t,e,n){},"9f58":function(t,e,n){"use strict";var s=n("64d7"),a=n.n(s);a.a},a591:function(t,e,n){},ab4f:function(t,e,n){},adf9:function(t,e,n){t.exports=n.p+"img/friends-icon.9b5e898e.png"},afe0:function(t,e,n){},b5cf:function(t,e,n){"use strict";var s=n("7371"),a=n.n(s);a.a},b761:function(t,e,n){"use strict";var s=n("78b9"),a=n.n(s);a.a},b93e:function(t,e,n){},ba5c:function(t,e,n){"use strict";var s=n("3635"),a=n.n(s);a.a},be5f:function(t,e,n){"use strict";var s=n("6459"),a=n.n(s);a.a},bea5:function(t,e,n){"use strict";var s=n("a591"),a=n.n(s);a.a},bf00:function(t,e,n){},c5d4:function(t,e,n){t.exports=n.p+"img/arrow.a7937ad8.png"},c87b:function(t,e,n){"use strict";var s=n("9d7c"),a=n.n(s);a.a},cdc0:function(t,e,n){"use strict";var s=n("7a03"),a=n.n(s);a.a},d299:function(t,e,n){},d6f6:function(t,e,n){t.exports=n.p+"img/user-active-icon.5bc121f1.png"},e124:function(t,e,n){t.exports=n.p+"img/message-icon.d5b0beda.png"},e329:function(t,e,n){},e7da:function(t,e,n){"use strict";var s=n("9e45"),a=n.n(s);a.a},f754:function(t,e,n){"use strict";var s=n("d299"),a=n.n(s);a.a},fa37:function(t,e,n){"use strict";var s=n("5908"),a=n.n(s);a.a},fb60:function(t,e,n){t.exports=n.p+"img/friends-active-icon.de0a54c9.png"}});
//# sourceMappingURL=app.01b97369.js.map